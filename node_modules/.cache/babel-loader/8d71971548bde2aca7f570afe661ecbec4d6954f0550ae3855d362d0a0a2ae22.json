{"ast":null,"code":"import { ref, onMounted, computed } from \"vue\";\nimport Web3 from \"web3\";\nimport mtcJSON from \"./contract/MyToken.json\";\nconst goerLiWS = \"wss://goerli.infura.io/ws/v3/dc92288a859d445890ede39d9dba5861\";\nexport default {\n  __name: 'App',\n  setup(__props, {\n    expose: __expose\n  }) {\n    __expose();\n    const web3 = new Web3(Web3.givenProvider || goerLiWS);\n\n    //0xd9145CCE52D386f254917e481eB44e9943F39138\n    const metContract = new web3.eth.Contract(mtcJSON.abi, \"0xd9145CCE52D386f254917e481eB44e9943F39138\");\n    const name = ref(\"\");\n    const symbol = ref(\"\");\n    const totalSupply = ref(\"\");\n    const balanceOf = ref(0);\n    const currentAccount = ref(\"\");\n    const getCoinInfo = async () => {\n      const account = await web3.eth.requestAccounts();\n      currentAccount.value = account[0];\n      name.value = await metContract.methods.name().call();\n      symbol.value = await metContract.methods.symbol().call();\n      totalSupply.value = await metContract.methods.totalSupply().call();\n      balanceOf.value = await metContract.methods.balanceOf(account[0]).call();\n    };\n    computed(() => {});\n    onMounted(() => {\n      getCoinInfo();\n    });\n    // ( async()=>{\n    //   const account = await web3.eth.requestAccounts();\n    //   console.log(\"account--->\",account)\n    // })();\n\n    const __returned__ = {\n      goerLiWS,\n      web3,\n      metContract,\n      name,\n      symbol,\n      totalSupply,\n      balanceOf,\n      currentAccount,\n      getCoinInfo,\n      ref,\n      onMounted,\n      computed,\n      get Web3() {\n        return Web3;\n      },\n      get mtcJSON() {\n        return mtcJSON;\n      }\n    };\n    Object.defineProperty(__returned__, '__isScriptSetup', {\n      enumerable: false,\n      value: true\n    });\n    return __returned__;\n  }\n};","map":{"version":3,"names":["ref","onMounted","computed","Web3","mtcJSON","goerLiWS","web3","givenProvider","metContract","eth","Contract","abi","name","symbol","totalSupply","balanceOf","currentAccount","getCoinInfo","account","requestAccounts","value","methods","call"],"sources":["D:/a/wallet-demo/web3-erc201/src/App.vue"],"sourcesContent":["<script setup>\nimport { ref, onMounted, computed } from \"vue\";\nimport Web3 from \"web3\";\nimport mtcJSON from \"./contract/MyToken.json\";\n\nconst goerLiWS =\n  \"wss://goerli.infura.io/ws/v3/dc92288a859d445890ede39d9dba5861\";\n\nconst web3 = new Web3(Web3.givenProvider || goerLiWS);\n\n//0xd9145CCE52D386f254917e481eB44e9943F39138\nconst metContract = new web3.eth.Contract(\n  mtcJSON.abi,\n  \"0xd9145CCE52D386f254917e481eB44e9943F39138\"\n);\n\nconst name = ref(\"\");\nconst symbol = ref(\"\");\nconst totalSupply = ref(\"\");\nconst balanceOf = ref(0);\nconst currentAccount = ref(\"\");\n\nconst getCoinInfo = async () => {\n  const account = await web3.eth.requestAccounts();\n  currentAccount.value = account[0];\n  name.value = await metContract.methods.name().call();\n  symbol.value = await metContract.methods.symbol().call();\n  totalSupply.value = await metContract.methods.totalSupply().call();\n  balanceOf.value = await metContract.methods.balanceOf(account[0]).call();\n};\n\ncomputed(()=>{\n  \n})\n\nonMounted(() => {\n  getCoinInfo();\n});\n// ( async()=>{\n//   const account = await web3.eth.requestAccounts();\n//   console.log(\"account--->\",account)\n// })();\n</script>\n\n<template>\n  <h1>基础信息</h1>\n  <hr />\n  <p>当前账号：{{ currentAccount }}</p>\n  <p>代币名称：{{ name }}</p>\n  <p>代币标识：{{ symbol }}</p>\n  <p>发行量：{{ totalSupply }}</p>\n  <p>持有数量：{{ balanceOf }}</p>\n</template>\n\n<style lang=\"less\">\n</style>"],"mappings":"AACA,SAASA,GAAG,EAAEC,SAAS,EAAEC,QAAQ,QAAQ,KAAK;AAC9C,OAAOC,IAAI,MAAM,MAAM;AACvB,OAAOC,OAAO,MAAM,yBAAyB;AAE7C,MAAMC,QAAQ,GACZ,+DAA+D;;;;;;;IAEjE,MAAMC,IAAI,GAAG,IAAIH,IAAI,CAACA,IAAI,CAACI,aAAa,IAAIF,QAAQ,CAAC;;IAErD;IACA,MAAMG,WAAW,GAAG,IAAIF,IAAI,CAACG,GAAG,CAACC,QAAQ,CACvCN,OAAO,CAACO,GAAG,EACX,4CACF,CAAC;IAED,MAAMC,IAAI,GAAGZ,GAAG,CAAC,EAAE,CAAC;IACpB,MAAMa,MAAM,GAAGb,GAAG,CAAC,EAAE,CAAC;IACtB,MAAMc,WAAW,GAAGd,GAAG,CAAC,EAAE,CAAC;IAC3B,MAAMe,SAAS,GAAGf,GAAG,CAAC,CAAC,CAAC;IACxB,MAAMgB,cAAc,GAAGhB,GAAG,CAAC,EAAE,CAAC;IAE9B,MAAMiB,WAAW,GAAG,MAAAA,CAAA,KAAY;MAC9B,MAAMC,OAAO,GAAG,MAAMZ,IAAI,CAACG,GAAG,CAACU,eAAe,CAAC,CAAC;MAChDH,cAAc,CAACI,KAAK,GAAGF,OAAO,CAAC,CAAC,CAAC;MACjCN,IAAI,CAACQ,KAAK,GAAG,MAAMZ,WAAW,CAACa,OAAO,CAACT,IAAI,CAAC,CAAC,CAACU,IAAI,CAAC,CAAC;MACpDT,MAAM,CAACO,KAAK,GAAG,MAAMZ,WAAW,CAACa,OAAO,CAACR,MAAM,CAAC,CAAC,CAACS,IAAI,CAAC,CAAC;MACxDR,WAAW,CAACM,KAAK,GAAG,MAAMZ,WAAW,CAACa,OAAO,CAACP,WAAW,CAAC,CAAC,CAACQ,IAAI,CAAC,CAAC;MAClEP,SAAS,CAACK,KAAK,GAAG,MAAMZ,WAAW,CAACa,OAAO,CAACN,SAAS,CAACG,OAAO,CAAC,CAAC,CAAC,CAAC,CAACI,IAAI,CAAC,CAAC;IAC1E,CAAC;IAEDpB,QAAQ,CAAC,MAAI,CAEb,CAAC,CAAC;IAEFD,SAAS,CAAC,MAAM;MACdgB,WAAW,CAAC,CAAC;IACf,CAAC,CAAC;IACF;IACA;IACA;IACA"},"metadata":{},"sourceType":"module","externalDependencies":[]}