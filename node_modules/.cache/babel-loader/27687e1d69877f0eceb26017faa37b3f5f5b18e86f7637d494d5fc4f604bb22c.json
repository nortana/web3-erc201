{"ast":null,"code":"import { ref, onMounted } from \"vue\";\nimport Web3 from \"web3\";\nimport mtcJSON from \"./contract/MyToken.json\";\nconst goerLiWS = \"wss://goerli.infura.io/ws/v3/dc92288a859d445890ede39d9dba5861\";\nexport default {\n  __name: 'App',\n  setup(__props, {\n    expose: __expose\n  }) {\n    __expose();\n    const web3 = new Web3(Web3.givenProvider || goerLiWS);\n\n    //0xd9145CCE52D386f254917e481eB44e9943F39138\n    const metContract = new web3.eth.Contract(mtcJSON.abi, \"0xd9145CCE52D386f254917e481eB44e9943F39138\");\n    const name = ref(\"\");\n    const symbol = ref(\"\");\n    const totalSupply = ref(\"\");\n    const balanceOf = ref(0);\n    const currentAccount = ref(\"\");\n    const getCoinInfo = async () => {\n      const account = await web3.eth.requestAccounts();\n      currentAccount.value = account[0];\n      name.value = metContract.methods.name().call();\n      symbol.value = metContract.methods.symbol().call();\n      totalSupply.value = metContract.methods.totalSupply().call();\n      balanceOf.value = metContract.methods.balanceOf(account[0]).call();\n    };\n    onMounted(() => {\n      getCoinInfo();\n    });\n    // ( async()=>{\n    //   const account = await web3.eth.requestAccounts();\n    //   console.log(\"account--->\",account)\n    // })();\n\n    const __returned__ = {\n      goerLiWS,\n      web3,\n      metContract,\n      name,\n      symbol,\n      totalSupply,\n      balanceOf,\n      currentAccount,\n      getCoinInfo,\n      ref,\n      onMounted,\n      get Web3() {\n        return Web3;\n      },\n      get mtcJSON() {\n        return mtcJSON;\n      }\n    };\n    Object.defineProperty(__returned__, '__isScriptSetup', {\n      enumerable: false,\n      value: true\n    });\n    return __returned__;\n  }\n};","map":{"version":3,"names":["ref","onMounted","Web3","mtcJSON","goerLiWS","web3","givenProvider","metContract","eth","Contract","abi","name","symbol","totalSupply","balanceOf","currentAccount","getCoinInfo","account","requestAccounts","value","methods","call"],"sources":["D:/a/wallet-demo/web3-erc201/src/App.vue"],"sourcesContent":["<script setup>\nimport { ref, onMounted } from \"vue\";\nimport Web3 from \"web3\";\nimport mtcJSON from \"./contract/MyToken.json\";\n\nconst goerLiWS = \"wss://goerli.infura.io/ws/v3/dc92288a859d445890ede39d9dba5861\"\n\nconst web3 = new Web3(Web3.givenProvider || goerLiWS);  \n\n//0xd9145CCE52D386f254917e481eB44e9943F39138\nconst metContract = new web3.eth.Contract(mtcJSON.abi, \"0xd9145CCE52D386f254917e481eB44e9943F39138\");\n\nconst name = ref(\"\");\nconst symbol = ref(\"\");\nconst totalSupply = ref(\"\");\nconst balanceOf = ref(0);\nconst currentAccount = ref(\"\");\n\nconst getCoinInfo = async ()=>{\n  const account = await web3.eth.requestAccounts();\n  currentAccount.value = account[0];\n  name.value=metContract.methods.name().call();\n  symbol.value=metContract.methods.symbol().call();\n  totalSupply.value=metContract.methods.totalSupply().call();\n  balanceOf.value=metContract.methods.balanceOf(account[0]).call();\n}\n\nonMounted(()=>{\n  getCoinInfo();\n})\n// ( async()=>{\n//   const account = await web3.eth.requestAccounts();\n//   console.log(\"account--->\",account)\n// })();\n\n</script>\n\n<template>\n  <h1>基础信息</h1>\n  <hr/>\n  <p>代币名称：{{name}}</p>\n  <p>代币标识：{{symbol}}</p>\n  <p>发行量：{{totalSupply}}</p>\n  <p>持有数量：{{balanceOf}}</p>\n\n</template>\n\n<style lang=\"less\">\n\n</style>"],"mappings":"AACA,SAASA,GAAG,EAAEC,SAAS,QAAQ,KAAK;AACpC,OAAOC,IAAI,MAAM,MAAM;AACvB,OAAOC,OAAO,MAAM,yBAAyB;AAE7C,MAAMC,QAAQ,GAAG,+DAA+D;;;;;;;IAEhF,MAAMC,IAAI,GAAG,IAAIH,IAAI,CAACA,IAAI,CAACI,aAAa,IAAIF,QAAQ,CAAC;;IAErD;IACA,MAAMG,WAAW,GAAG,IAAIF,IAAI,CAACG,GAAG,CAACC,QAAQ,CAACN,OAAO,CAACO,GAAG,EAAE,4CAA4C,CAAC;IAEpG,MAAMC,IAAI,GAAGX,GAAG,CAAC,EAAE,CAAC;IACpB,MAAMY,MAAM,GAAGZ,GAAG,CAAC,EAAE,CAAC;IACtB,MAAMa,WAAW,GAAGb,GAAG,CAAC,EAAE,CAAC;IAC3B,MAAMc,SAAS,GAAGd,GAAG,CAAC,CAAC,CAAC;IACxB,MAAMe,cAAc,GAAGf,GAAG,CAAC,EAAE,CAAC;IAE9B,MAAMgB,WAAW,GAAG,MAAAA,CAAA,KAAU;MAC5B,MAAMC,OAAO,GAAG,MAAMZ,IAAI,CAACG,GAAG,CAACU,eAAe,CAAC,CAAC;MAChDH,cAAc,CAACI,KAAK,GAAGF,OAAO,CAAC,CAAC,CAAC;MACjCN,IAAI,CAACQ,KAAK,GAACZ,WAAW,CAACa,OAAO,CAACT,IAAI,CAAC,CAAC,CAACU,IAAI,CAAC,CAAC;MAC5CT,MAAM,CAACO,KAAK,GAACZ,WAAW,CAACa,OAAO,CAACR,MAAM,CAAC,CAAC,CAACS,IAAI,CAAC,CAAC;MAChDR,WAAW,CAACM,KAAK,GAACZ,WAAW,CAACa,OAAO,CAACP,WAAW,CAAC,CAAC,CAACQ,IAAI,CAAC,CAAC;MAC1DP,SAAS,CAACK,KAAK,GAACZ,WAAW,CAACa,OAAO,CAACN,SAAS,CAACG,OAAO,CAAC,CAAC,CAAC,CAAC,CAACI,IAAI,CAAC,CAAC;IAClE,CAAC;IAEDpB,SAAS,CAAC,MAAI;MACZe,WAAW,CAAC,CAAC;IACf,CAAC,CAAC;IACF;IACA;IACA;IACA"},"metadata":{},"sourceType":"module","externalDependencies":[]}