{"ast":null,"code":"import { ref, onMounted, computed } from \"vue\";\nimport Web3 from \"web3\";\nimport mtcJSON from \"./contract/MyToken.json\";\nconst goerLiWS = \"wss://goerli.infura.io/ws/v3/dc92288a859d445890ede39d9dba5861\";\nexport default {\n  __name: 'App',\n  setup(__props, {\n    expose: __expose\n  }) {\n    __expose();\n    const web3 = new Web3(Web3.givenProvider || goerLiWS);\n\n    //0xd9145CCE52D386f254917e481eB44e9943F39138\n    const metContract = new web3.eth.Contract(mtcJSON.abi\n    //,\"0xd9145CCE52D386f254917e481eB44e9943F39138\"\n    );\n    const name = ref(\"\");\n    const symbol = ref(\"\");\n    const totalSupply = ref(\"\");\n    const balanceOf = ref(0);\n    const currentAccount = ref(\"\");\n\n    //转账信息\n    const toAddress = ref(\"\");\n    const amount = ref(0);\n    const getCoinInfo = async () => {\n      const account = await web3.eth.requestAccounts();\n      currentAccount.value = account[0];\n      name.value = await metContract.methods.name().call();\n      symbol.value = await metContract.methods.symbol().call();\n      totalSupply.value = await metContract.methods.totalSupply().call();\n      balanceOf.value = await metContract.methods.balanceOf(account[0]).call();\n    };\n    const ts = computed(() => {\n      return web3.utils.fromWei(totalSupply.value, 'ether');\n    });\n    onMounted(() => {\n      getCoinInfo();\n    });\n    // ( async()=>{\n    //   const account = await web3.eth.requestAccounts();\n    //   console.log(\"account--->\",account)\n    // })();\n\n    const __returned__ = {\n      goerLiWS,\n      web3,\n      metContract,\n      name,\n      symbol,\n      totalSupply,\n      balanceOf,\n      currentAccount,\n      toAddress,\n      amount,\n      getCoinInfo,\n      ts,\n      ref,\n      onMounted,\n      computed,\n      get Web3() {\n        return Web3;\n      },\n      get mtcJSON() {\n        return mtcJSON;\n      }\n    };\n    Object.defineProperty(__returned__, '__isScriptSetup', {\n      enumerable: false,\n      value: true\n    });\n    return __returned__;\n  }\n};","map":{"version":3,"names":["ref","onMounted","computed","Web3","mtcJSON","goerLiWS","web3","givenProvider","metContract","eth","Contract","abi","name","symbol","totalSupply","balanceOf","currentAccount","toAddress","amount","getCoinInfo","account","requestAccounts","value","methods","call","ts","utils","fromWei"],"sources":["D:/a/wallet-demo/web3-erc201/src/App.vue"],"sourcesContent":["<script setup>\nimport { ref, onMounted, computed } from \"vue\";\nimport Web3 from \"web3\";\nimport mtcJSON from \"./contract/MyToken.json\";\n\nconst goerLiWS =\n  \"wss://goerli.infura.io/ws/v3/dc92288a859d445890ede39d9dba5861\";\n\nconst web3 = new Web3(Web3.givenProvider || goerLiWS);\n\n//0xd9145CCE52D386f254917e481eB44e9943F39138\nconst metContract = new web3.eth.Contract(\n  mtcJSON.abi\n  //,\"0xd9145CCE52D386f254917e481eB44e9943F39138\"\n);\n\nconst name = ref(\"\");\nconst symbol = ref(\"\");\nconst totalSupply = ref(\"\");\nconst balanceOf = ref(0);\nconst currentAccount = ref(\"\");\n\n//转账信息\nconst toAddress = ref(\"\")\nconst amount = ref(0)\n\n\nconst getCoinInfo = async () => {\n  const account = await web3.eth.requestAccounts();\n  currentAccount.value = account[0];\n  name.value = await metContract.methods.name().call();\n  symbol.value = await metContract.methods.symbol().call();\n  totalSupply.value = await metContract.methods.totalSupply().call();\n  balanceOf.value = await metContract.methods.balanceOf(account[0]).call();\n};\n\nconst ts = computed(()=>{\n  return web3.utils.fromWei(totalSupply.value,'ether')\n})\n\nonMounted(() => {\n  getCoinInfo();\n});\n// ( async()=>{\n//   const account = await web3.eth.requestAccounts();\n//   console.log(\"account--->\",account)\n// })();\n</script>\n\n<template>\n  <h1>基础信息</h1>\n  <hr />\n  <p>当前账号：{{ currentAccount }}</p>\n  <p>代币名称：{{ name }}</p>\n  <p>代币标识：{{ symbol }}</p>\n  <p>发行量：{{ totalSupply }}</p>\n  <p>持有数量：{{ balanceOf }}</p>\n  <h1>转装操作</h1>\n<hr/>\n<p>转入地址：<input type=\"text\" v-model=\"toAddress\"/></p>\n<p>转出金额：<input type=\"text\" v-model=\"amount\"/></p>\n<button></button>\n</template>\n\n<style lang=\"less\">\n</style>"],"mappings":"AACA,SAASA,GAAG,EAAEC,SAAS,EAAEC,QAAQ,QAAQ,KAAK;AAC9C,OAAOC,IAAI,MAAM,MAAM;AACvB,OAAOC,OAAO,MAAM,yBAAyB;AAE7C,MAAMC,QAAQ,GACZ,+DAA+D;;;;;;;IAEjE,MAAMC,IAAI,GAAG,IAAIH,IAAI,CAACA,IAAI,CAACI,aAAa,IAAIF,QAAQ,CAAC;;IAErD;IACA,MAAMG,WAAW,GAAG,IAAIF,IAAI,CAACG,GAAG,CAACC,QAAQ,CACvCN,OAAO,CAACO;IACR;IACF,CAAC;IAED,MAAMC,IAAI,GAAGZ,GAAG,CAAC,EAAE,CAAC;IACpB,MAAMa,MAAM,GAAGb,GAAG,CAAC,EAAE,CAAC;IACtB,MAAMc,WAAW,GAAGd,GAAG,CAAC,EAAE,CAAC;IAC3B,MAAMe,SAAS,GAAGf,GAAG,CAAC,CAAC,CAAC;IACxB,MAAMgB,cAAc,GAAGhB,GAAG,CAAC,EAAE,CAAC;;IAE9B;IACA,MAAMiB,SAAS,GAAGjB,GAAG,CAAC,EAAE,CAAC;IACzB,MAAMkB,MAAM,GAAGlB,GAAG,CAAC,CAAC,CAAC;IAGrB,MAAMmB,WAAW,GAAG,MAAAA,CAAA,KAAY;MAC9B,MAAMC,OAAO,GAAG,MAAMd,IAAI,CAACG,GAAG,CAACY,eAAe,CAAC,CAAC;MAChDL,cAAc,CAACM,KAAK,GAAGF,OAAO,CAAC,CAAC,CAAC;MACjCR,IAAI,CAACU,KAAK,GAAG,MAAMd,WAAW,CAACe,OAAO,CAACX,IAAI,CAAC,CAAC,CAACY,IAAI,CAAC,CAAC;MACpDX,MAAM,CAACS,KAAK,GAAG,MAAMd,WAAW,CAACe,OAAO,CAACV,MAAM,CAAC,CAAC,CAACW,IAAI,CAAC,CAAC;MACxDV,WAAW,CAACQ,KAAK,GAAG,MAAMd,WAAW,CAACe,OAAO,CAACT,WAAW,CAAC,CAAC,CAACU,IAAI,CAAC,CAAC;MAClET,SAAS,CAACO,KAAK,GAAG,MAAMd,WAAW,CAACe,OAAO,CAACR,SAAS,CAACK,OAAO,CAAC,CAAC,CAAC,CAAC,CAACI,IAAI,CAAC,CAAC;IAC1E,CAAC;IAED,MAAMC,EAAE,GAAGvB,QAAQ,CAAC,MAAI;MACtB,OAAOI,IAAI,CAACoB,KAAK,CAACC,OAAO,CAACb,WAAW,CAACQ,KAAK,EAAC,OAAO,CAAC;IACtD,CAAC,CAAC;IAEFrB,SAAS,CAAC,MAAM;MACdkB,WAAW,CAAC,CAAC;IACf,CAAC,CAAC;IACF;IACA;IACA;IACA"},"metadata":{},"sourceType":"module","externalDependencies":[]}